<!DOCTYPE html>
<html>
<head>
	<title>Calculadora P2D</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css">
	<script>
		function calculo()
		{
//passando os valores do campo do form para as variaveis

tarifa = parseFloat(document.meu_form.tarifa.value);
taxaEmbarque = parseFloat(document.meu_form.taxaEmbarque.value);
soma1step = eval(tarifa + taxaEmbarque); //fazendo a soma

document.meu_form.valor_total.value = soma1step;


//fazendo o segundo passo

taxaP2D = (0.10);
soma2step = (soma1step + (soma1step * taxaP2D));
document.meu_form.valor_total2.value = soma2step;

//fazendo segundo passo

soma3step = ((soma2step - taxaEmbarque)*0.05);
document.meu_form.valor_total3.value = soma3step;


//no evento do onblur para que nao apareça 'undefined'
//eu faço a seguinte condição
//se a soma for diferente de undefined ele mostra no valor total



}
</script>
</head>

<body>
	<nav class="navbar navbar-light bg-light">
		<div class="container-fluid">
			<a class="navbar-brand" href="#">P2D</a>
		</div>
	</nav>		


	<section>
		<form name="meu_form" method="post" action="" id="form">
			<table width="80%" border="0" align="center" cellpadding="2" cellspacing="2">
				<tr>
					<td colspan="2"><div align="center">Calculadora de comissões P2D Travel</div></td>
				</tr>
				<tr>
					<td width="27%">Tarifa</td>
					<td width="73%"><input name="tarifa" type="text" id="tarifa"></td>
				</tr>
				<tr>
					<td>Taxa de Embarque</td>
					<td><input name="taxaEmbarque" type="text" id="taxaEmbarque" onBlur="calculo();"></td>
				</tr>
				<tr>
					<td>Valor Total</td>
					<td><input name="valor_total" onFocus="this.blur()" type="text" id="valor_total"></td>
				</tr>
				<tr>
					<td>Valor + TAXA P2D</td>
					<td><input name="valor_total2" onFocus="this.blur()" type="text" id="valor_total2"></td>
				</tr>
				<tr>
					<td>Comissão Parceiro</td>
					<td><input name="valor_total3" onFocus="this.blur()" type="text" id="valor_total3"></td>
				</tr>
			</table>
		</form>
		<a type="button" class="btn btn-success" onClick="form.reset();">Limpar</a>
	</section>	
</body>
</html>